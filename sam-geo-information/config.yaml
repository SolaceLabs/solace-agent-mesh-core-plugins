# Plugin Metadata:
# Name: sam-geo-information
# Version: 0.1.0
# Description: A plugin that provides comprehensive geographic information services including location, timezone, and weather data.
# Author: SolaceLabs <solacelabs@solace.com>

log:
  stdout_log_level: INFO
  log_file_level: DEBUG
  log_file: __COMPONENT_KEBAB_CASE_NAME__.log

# To use the `shared_config.yaml` file, uncomment the following line and remove the `shared_config` section below.
# !include ../shared_config.yaml
shared_config:
  - broker_connection: &broker_connection
      dev_mode: ${SOLACE_DEV_MODE, false}
      broker_url: ${SOLACE_BROKER_URL, ws://localhost:8080}
      broker_username: ${SOLACE_BROKER_USERNAME, default}
      broker_password: ${SOLACE_BROKER_PASSWORD, default}
      broker_vpn: ${SOLACE_BROKER_VPN, default}
      temporary_queue: ${USE_TEMPORARY_QUEUES, true}

  - models:
    general: &general_model
      model: ${LLM_SERVICE_GENERAL_MODEL_NAME}
      api_base: ${LLM_SERVICE_ENDPOINT}
      api_key: ${LLM_SERVICE_API_KEY}

  - services:
    session_service: &default_session_service
      type: "memory"
      default_behavior: "PERSISTENT"
    
    # Default artifact service configuration
    artifact_service: &default_artifact_service
      type: "filesystem"
      base_path: "/tmp/samv2"
      artifact_scope: namespace # Or "namespace", "app", "custom"

apps:
  - name: __COMPONENT_KEBAB_CASE_NAME__-app
    app_base_path: . 
    app_module: solace_agent_mesh.agent.sac.app 
    broker:
      <<: *broker_connection

    app_config:
      namespace: ${NAMESPACE} 
      supports_streaming: true 
      agent_name: "__COMPONENT_PASCAL_CASE_NAME__" 
      display_name: "__COMPONENT_PASCAL_CASE_NAME__" 
      model: *general_model 

      instruction: |
        You are a helpful assistant with expertise in geographic information.
        You can convert city names to coordinates, find timezone information, and get weather forecasts.

      tools:
        - tool_type: python
          component_module: sam_geo_information
          function_name: city_to_coordinates
          tool_config:
            geocoding_api_key: ${GEOCODING_API_KEY}

        - tool_type: python
          component_module: sam_geo_information
          function_name: city_to_timezone
          tool_config:
            geocoding_api_key: ${GEOCODING_API_KEY}

        - tool_type: python
          component_module: sam_geo_information
          function_name: get_weather
          tool_config:
            geocoding_api_key: ${GEOCODING_API_KEY}
            weather_api_key: ${WEATHER_API_KEY}

      session_service: *default_session_service
      artifact_service: *default_artifact_service

      artifact_handling_mode: "embed"
      enable_embed_resolution: true
      enable_artifact_content_instruction: true

      agent_card:
        description: "A plugin that provides comprehensive geographic information services including location, timezone, and weather data"
        defaultInputModes: ["text"]
        defaultOutputModes: ["text"]
        skills:
          - id: "city_to_coordinates"
            name: "city_to_coordinates"
            description: "Convert a city name to its geographic coordinates."
          - id: "city_to_timezone"
            name: "city_to_timezone"
            description: "Convert a city name to its timezone information."
          - id: "get_weather"
            name: "get_weather"
            description: "Get current weather conditions and forecast for a location."

      agent_card_publishing: { interval_seconds: 10 }
      agent_discovery: { enabled: false }
      inter_agent_communication:
        allow_list: []
        request_timeout_seconds: 30